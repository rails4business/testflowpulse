<% flash.each_with_index do |(key, message), idx| %>
  <% color_classes = case key.to_sym
     when :notice then "bg-green-50 text-green-800 border-green-200"
     when :alert  then "bg-yellow-50 text-yellow-800 border-yellow-200"
     when :error  then "bg-red-50 text-red-800 border-red-200"
     else              "bg-blue-50 text-blue-800 border-blue-200"
     end %>

  <% rid = "flash-row-#{idx}" %>

  <div class="mx-auto max-w-3xl my-3 px-4" data-turbo-temporary>
    <div id="<%= rid %>" class="flex items-center justify-between border rounded-xl px-4 py-3 shadow-sm <%= color_classes %>">
      <div class="flex items-center gap-2">
        <% if key.to_sym == :notice %>
          <span>✅</span>
        <% elsif key.to_sym == :alert %>
          <span>⚠️</span>
        <% elsif key.to_sym == :error %>
          <span>❌</span>
        <% else %>
          <span>ℹ️</span>
        <% end %>
        <span class="font-medium"><%= message %></span>
      </div>

      <!-- Flowbite: chiude l’elemento target -->
      <button type="button"
              class="ml-3 text-sm opacity-70 hover:opacity-100"
              data-dismiss-target="#<%= rid %>"
              aria-label="Chiudi">
        ✖
      </button>
    </div>
  </div>
<% end %>
